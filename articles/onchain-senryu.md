---
title: "Onchain Senryu: 伝統的な川柳をWeb3で新たな体験に"
emoji: "🖋️"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [Base,Next.js,Solidity,WorldID,Goldsky]
published: false
---


## この記事について

ETHGlobalのSuperhackイベントで開発した[Onchain Senryu](https://ethglobal.com/showcase/onchain-senryu-sfbo5)の紹介と、World ID,BaseおよびGoldskyを使った開発過程での学びについて共有します。

## ETHGlobalとは

Web3開発者の育成と支援を目的に、さまざまなイベントを主催する組織です。2023年には日本で[ETHGlobal Tokyo](https://ethglobal.com/events/tokyo)が開催され、多くの革新的なプロジェクトが発表されました。その他の主要イベントとしては[Devconnect](https://devconnect.org/)があります。

## 今回のSuperhackのイベントについて

Superhackは、superchainを中心に行われるハッカソンです。参加者は、Base上で動作する革新的なプロジェクトを開発することが求められます。

### Baseとは

Baseは、イーサリアムのレイヤー2スケーリングソリューションであり、高速で低コストなトランザクション処理を提供します。これにより、Web3アプリケーションがより多くのユーザーに利用されることが期待されています。Baseのエコシステムは、開発者が簡単にDAppsを構築し、既存のイーサリアムインフラと互換性を持たせることができます。

## Onchain Senryuの紹介

**Onchain Senryu**は、伝統的な日本の短詩である川柳をWeb3技術で新たに体験するための分散型プラットフォームです。このプラットフォームでは、ユーザーが川柳を作成・投稿し、コミュニティによる投票を行えます。ブロックチェイン技術を活用することで、透明性と真正性が保証され、AIがユーザー入力に基づいて川柳を生成します。

### 使用技術

1. **Base**:
   - **ブロックチェインプラットフォーム**: Baseブロックチェイン上で川柳の作成・投稿・投票することで、透明性と安全性を確保。

2. **Next.js**:
   - **フロントエンド**: ユーザーに対してスムーズで直感的なインタフェースを提供。

3. **Solidity**:
   - **スマートコントラクト**: 川柳の投稿と投票を処理し、すべてのデータが透明かつ不変であることを保証。

4. **World ID**:
   - **認証**: ボット対策として、World IDを使用してユーザー認証をして、実在するユーザーのみがプラットフォームにアクセス可能。

5. **Goldsky**:
   - **リアルタイムデータ**: Goldskyを利用して、川柳のランキングや投票結果をリアルタイムで表示。

### Onchain Senryuの動作プロセス

- **川柳の作成**: ユーザーがテーマやプロンプトを英語で入力すると、AIがそれをもとに日本語の川柳を生成します。
- **投稿と投票**: 生成された川柳がブロックチェインに投稿され、コミュニティによる投票が行われます。投票結果はリアルタイムでブロックチェインに記録され、透明性が保証されます。

## 開発で苦労した点と工夫

### Baseブロックチェインの使用

Baseチェインは、初めて使用するプラットフォームだったため、FoundryやMetaMaskとの統合に不安がありました。しかし、これらのツールがスムーズに連携し、予想以上に簡単にセットアップできたことが非常に印象的でした。特に、Baseはイーサリアム互換のため、既存の知識が活かせた点も大きな助けとなりました。

### Goldskyによるリアルタイムランキング

投票数に基づいてランキング機能を実装する際、ブロックチェインでは関係データベースのような簡単なソートが難しいことに直面しました。しかし、Goldskyのサブグラフ機能を活用することで、GraphQLを用いてリアルタイムにクエリを送信できるようになり、機能を諦めることなく実装しました。これにより、リアルタイムデータの管理が大幅に簡略化されました。

### World IDの統合

World IDを使ったユーザー認証は、最初は複雑に感じましたが、充実したドキュメントとサンプルコードのおかげでスムーズに組み込むことができました。これにより、ボット対策が効果的に行え、プラットフォームの信頼性が向上しました。さらに、World IDの統合により、実在するユーザーのみが川柳の作成と投票に参加できる環境が構築されました。

## まとめ

**Onchain Senryu**は、伝統的な文化と最新のWeb3技術を融合させた革新的なプロジェクトです。このプラットフォームは、川柳という日本の伝統的な詩形を世界中に広めるだけでなく、ブロックチェイン技術を通じてその真正性と透明性を保証します。今後も、多言語対応やガスレス取引の実装など、さらなる機能拡張を予定しています。
